<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <title>Benchmark#bmbm</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  </head>
  <body class="method">
    <h1><span class="path">Benchmark</span><span>#</span><span class="name">bmbm</span></h1>
    <hr />
    <p>
      <span class="visibility">public</span>
      
        <span>bmbm(width = 0) {|job| ...}</span>
      
    </p>
    
    <div class="comment">
      <p>Sometimes benchmark results are skewed because code executed earlier encounters different garbage collection overheads than that run later. #bmbm attempts to minimize this effect by running the tests twice, the first time as a rehearsal in order to get the runtime environment stable, the second time for real. <tt>GC.start</tt> is executed before the start of each of the real timings; the cost of this is not included in the timings. In reality, though, there's only so much that #bmbm can do, and the results are not guaranteed to be isolated from garbage collection and other effects.</p><p>Because #bmbm takes two passes through the tests, it can calculate the required label width.</p><pre>      require 'benchmark'

      array = (1..1000000).map { rand }

      Benchmark.bmbm do |x|
        x.report(&quot;sort!&quot;) { array.dup.sort! }
        x.report(&quot;sort&quot;)  { array.dup.sort  }
      end
</pre><p><em>Generates:</em></p><pre>       Rehearsal -----------------------------------------
       sort!  11.928000   0.010000  11.938000 ( 12.756000)
       sort   13.048000   0.020000  13.068000 ( 13.857000)
       ------------------------------- total: 25.006000sec

                   user     system      total        real
       sort!  12.959000   0.010000  12.969000 ( 13.793000)
       sort   12.007000   0.000000  12.007000 ( 12.791000)
</pre><p>#bmbm yields a Benchmark::Job object and returns an array of Benchmark::Tms objects.</p>
    </div>
    
    
  </body>
</html>

